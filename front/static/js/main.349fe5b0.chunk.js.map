{"version":3,"sources":["common/HeaderMenu/index.js","manager/rules-management/RulesForm.js","manager/rules-management/RulesList.js","manager/rules-management/index.js","manager/model-validator/FileUploader.js","manager/model-validator/index.js","index.js"],"names":["keySwitch","HeaderMenu","onClick","match","useRouteMatch","k","path","useState","enabled","key","className","type","shape","theme","mode","defaultSelectedKeys","Item","to","addStyles","Option","Select","BasicInfo","data","disabled","Form","useForm","form","name","setName","defaultData","value","onValuesChange","fields","label","placeholder","Formula","formula","setFormula","latex","setLatex","useEffect","updateLatex","equation","functionDict","from","toLeft","toRight","replace","replaceBetween","origin","startIndex","endIndex","insertion","substring","recursiveReplaceFunctions","string","result","XRegExp","matchRecursive","valueNames","left","right","shift","length","start","end","test","replacedArg","shiftArg","substr","parseFormula","gutter","flex","style","display","justifyContent","fontSize","ConstraintForm","showActions","onDelete","shifted","setType","pset","setPset","on","setOn","attribute","setAttribute","operation","setOperation","setValue","danger","icon","CloseOutlined","size","opacity","Group","Button","FilterForm","constraintsDeleteable","setConstraintsDeleteable","stateRef","useRef","action","setAction","scope","setScope","space","setSpace","entities","setEntities","constraints","map","prop","isDeleteable","setConstraints","join","current","split","idx","dashed","filter","p","marginTop","PlusOutlined","RulesForm","actions","filters","element","i","setFilters","currentFilter","setCurrentFilter","rulesDeleteable","setRulesDeleteable","setDisabled","saveDisabled","setSaveDisabled","ArrowLeftOutlined","width","marginBottom","onChange","_","index","newConstraints","e","onDeleteFilter","RulesList","setData","ruleShown","setRuleShown","currentRule","setCurrentRule","fetch","method","then","response","json","success","rules","catch","error","console","log","itemLayout","dataSource","renderItem","item","Text","Header","Layout","Content","Footer","RulesManager","formShown","setFormShown","content","setContent","hideForm","position","zIndex","minHeight","paddingTop","background","justify","xl","xxl","xs","dotSwitch","s","expanded","CheckOutlined","MinusSquareFilled","PlusSquareFilled","Result","FileUploader","uuid","setUuid","validateShown","setValidateShown","results","setResults","validating","setValidating","setExpanded","accept","maxCount","info","file","status","onRemove","UploadOutlined","loading","Object","keys","animationDelay","dot","toggleExpand","color","ModelValidator","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.349fe5b0.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport { useRouteMatch } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { Menu, Button } from \"antd\";\n\nimport \"./index.scss\";\n\nconst keySwitch = {\n  \"/\": \"home\",\n  \"/upload\": \"upload\",\n};\n\nexport default function HeaderMenu({ onClick }) {\n  const match = useRouteMatch();\n  const k = keySwitch[match.path];\n  const [enabled, setEnabled] = useState(k === \"home\");\n  const [key, setKey] = useState(k);\n\n  return (\n    <>\n      {enabled && (\n        <div className=\"HeaderMenu-ButtonGroup\">\n          <Button type=\"primary\" shape=\"round\" onClick={onClick}>\n            Nueva Regla\n          </Button>\n        </div>\n      )}\n\n      <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={[key]}>\n        <Menu.Item key=\"home\">\n          <Link to=\"/\">Reglas</Link>\n        </Menu.Item>\n        <Menu.Item key=\"upload\">\n          <Link to=\"/upload\">Validador</Link>\n        </Menu.Item>\n      </Menu>\n    </>\n  );\n}\n","import React, { useState, useRef, Fragment, useEffect } from \"react\";\n\nimport { Button, Divider, Form, Input, Radio, Select, Col, Row } from \"antd\";\nimport {\n  ArrowLeftOutlined,\n  CloseOutlined,\n  CaretUpOutlined,\n  CaretDownOutlined,\n  PlusOutlined,\n} from \"@ant-design/icons\";\nimport { addStyles, StaticMathField } from \"react-mathquill\";\nimport XRegExp from \"xregexp\";\n\nimport \"./index.scss\";\n\naddStyles();\nconst { Option } = Select;\n\nfunction BasicInfo({ data, disabled }) {\n  const [form] = Form.useForm();\n  const [name, setName] = useState(!!data ? data.name : \"\");\n\n  const onFormChange = ({ name }) => {\n    setName(name);\n  };\n\n  const defaultData = [{ name: \"name\", value: name }];\n\n  return (\n    <>\n      <Form\n        className=\"RulesForm-PropertyForm\"\n        form={form}\n        onValuesChange={onFormChange}\n        fields={defaultData}\n      >\n        <Form.Item label=\"Nombre\" name=\"name\">\n          <Input\n            disabled={disabled}\n            placeholder=\"Ej: Estructura y denominación\"\n            value={name}\n          />\n        </Form.Item>\n      </Form>\n\n      <Formula value={!!data ? data.formula : \"\"} disabled={disabled} />\n    </>\n  );\n}\n\nfunction Formula({ value, disabled }) {\n  const [form] = Form.useForm();\n  const [formula, setFormula] = useState(value || \"\");\n  const [latex, setLatex] = useState(\"\");\n\n  useEffect(() => updateLatex(), []);\n\n  const parseFormula = (formula) => {\n    let equation = \" \" + formula; // Necessary space for parentheses parsing\n\n    const operatorDict = [\n      { from: /and/g, to: \"\\\\wedge\" },\n      { from: /or/g, to: \"\\\\vee\" },\n      { from: /then/g, to: \"\\\\rightarrow\" },\n      { from: /union|\\|/g, to: \"\\\\union\" },\n      { from: /inter|\\&/g, to: \"\\\\intersect\" },\n      { from: /empty/g, to: \"\\\\varnothing\" },\n      { from: /!=/g, to: \"\\\\neq\" },\n      { from: />=/g, to: \"\\\\geq\" },\n      { from: /<=/g, to: \"\\\\leq\" },\n    ];\n\n    const functionDict = [\n      { from: /^(\\s|\\()/, toLeft: \"\\\\left\", toRight: \"\\\\right\" },\n      { from: /^count/, toLeft: \"|\", toRight: \"|\" },\n      { from: /^sum/, toLeft: \"\\\\sum{\\\\left\", toRight: \"\\\\right}\" },\n    ];\n\n    equation = equation.replace(/p(\\d+)/g, \"P_{$1}\");\n\n    // Replace operations\n    for (const { from, to } of operatorDict) {\n      equation = equation.replace(from, to);\n    }\n\n    // Replace functions\n    function replaceBetween(origin, startIndex, endIndex, insertion) {\n      return (\n        origin.substring(0, startIndex) + insertion + origin.substring(endIndex)\n      );\n    }\n\n    function recursiveReplaceFunctions(string) {\n      let result = XRegExp.matchRecursive(string, \"(\\\\w+|\\\\s)\\\\(\", \"\\\\)\", \"g\", {\n        valueNames: [null, \"left\", \"arg\", \"right\"],\n      });\n      let left = \"\";\n      let right = \"\";\n      let shift = 0;\n      while (result.length > 0) {\n        for (const { name, value, start, end } of result) {\n          if (name == \"left\") {\n            for (const { from, toLeft, toRight } of functionDict) {\n              if (from.test(value)) {\n                left = toLeft;\n                right = toRight;\n                break;\n              }\n            }\n\n            string = replaceBetween(string, start + shift, end + shift, left);\n            shift += left.length - value.length;\n          } else if (name == \"arg\") {\n            const [replacedArg, shiftArg] = recursiveReplaceFunctions(value);\n            string = replaceBetween(\n              string,\n              start + shift,\n              end + shift,\n              replacedArg\n            );\n            shift += shiftArg;\n          } else {\n            string = replaceBetween(string, start + shift, end + shift, right);\n            shift += right.length - value.length;\n          }\n        }\n        result = XRegExp.matchRecursive(string, \"\\\\w+\\\\(\", \"\\\\)\", \"g\", {\n          valueNames: [null, \"left\", \"arg\", \"right\"],\n        });\n      }\n\n      return [string, shift];\n    }\n\n    equation = recursiveReplaceFunctions(equation)[0];\n\n    // Fix parentheses\n    equation = equation.replace(/\\\\left/g, \"(\");\n    equation = equation.replace(/\\\\right/g, \")\");\n\n    return equation.substr(1);\n  };\n\n  const onFormChange = ({ formula }) => setFormula(formula);\n\n  const updateLatex = () => setLatex(parseFormula(formula));\n\n  const defaultData = [{ name: \"formula\", value: formula }];\n\n  return (\n    <div>\n      <Form\n        className=\"RulesForm-PropertyForm\"\n        form={form}\n        onValuesChange={onFormChange}\n        fields={defaultData}\n      >\n        <Row gutter={16}>\n          <Col flex=\"auto\">\n            <Form.Item label=\"Fórmula\" name=\"formula\">\n              <Input\n                disabled={disabled}\n                placeholder=\"Ej: p0 and p1\"\n                value={formula}\n              />\n            </Form.Item>\n          </Col>\n          <Col>\n            <Button disabled={disabled} onClick={updateLatex}>\n              Actualizar\n            </Button>\n          </Col>\n        </Row>\n      </Form>\n\n      <div\n        style={{\n          display: !!latex ? \"flex\" : \"none\",\n          justifyContent: \"center\",\n        }}\n      >\n        <StaticMathField style={{ fontSize: 30 }}>{latex}</StaticMathField>\n      </div>\n    </div>\n  );\n}\n\nfunction ConstraintForm({ data, showActions, onDelete, shifted, disabled }) {\n  const [form] = Form.useForm();\n\n  const [type, setType] = useState(!!data ? data.type : \"\");\n  const [pset, setPset] = useState(!!data ? data.pset || \"\" : \"\");\n  const [on, setOn] = useState(!!data ? data.on : \"\");\n  const [attribute, setAttribute] = useState(\n    !!data ? data.attribute || \"\" : \"\"\n  );\n  const [operation, setOperation] = useState(!!data ? data.operation : \"\");\n  const [value, setValue] = useState(!!data ? data.value : \"\");\n\n  const defaultData = [\n    { name: \"on\", value: on },\n    { name: \"type\", value: type },\n    { name: \"pset\", value: pset },\n    { name: \"attribute\", value: attribute },\n    { name: \"operation\", value: operation },\n    { name: \"value\", value: value },\n  ];\n\n  const onFormChange = ({ type, pset, on, attribute, operation, value }) => {\n    !!type && setType(type);\n    !!pset && setPset(pset);\n    !!on && setOn(on);\n    !!attribute && setAttribute(attribute);\n    !!operation && setOperation(operation);\n    !!value && setValue(value);\n  };\n\n  return (\n    <div className=\"RulesForm-FormDeleteable\">\n      {(showActions || shifted) && (\n        <div className=\"RulesForm-FormDeleteabe-Actions\">\n          <Button\n            danger\n            shape=\"circle\"\n            icon={<CloseOutlined />}\n            size=\"Large\"\n            style={{ opacity: shifted && 0 }}\n            onClick={!shifted && onDelete}\n          />\n        </div>\n      )}\n\n      <Form\n        className=\"RulesForm-PropertyForm\"\n        form={form}\n        onValuesChange={onFormChange}\n        fields={defaultData}\n      >\n        <Form.Item label=\"Sobre\" name=\"on\">\n          <Radio.Group value={on}>\n            <Radio.Button disabled={disabled} value=\"entity\">\n              Entidad\n            </Radio.Button>\n            <Radio.Button disabled={disabled} value=\"type\">\n              Tipo\n            </Radio.Button>\n          </Radio.Group>\n        </Form.Item>\n        <Form.Item label=\"Tipo\" name=\"type\">\n          <Radio.Group value={type}>\n            <Radio.Button disabled={disabled} value=\"pset\">\n              PropertySet\n            </Radio.Button>\n            <Radio.Button disabled={disabled} value=\"attribute\">\n              Atributo\n            </Radio.Button>\n            <Radio.Button disabled={disabled} value=\"location\">\n              Ubicación\n            </Radio.Button>\n          </Radio.Group>\n        </Form.Item>\n        {type === \"pset\" ? (\n          <>\n            <Form.Item label=\"Nombre del Pset\" name=\"pset\">\n              <Input\n                disabled={disabled}\n                placeholder=\"Ej: Pset_\\w+Common\"\n                value={pset}\n              />\n            </Form.Item>\n            <Form.Item label=\"Nombre de la propiedad\" name=\"attribute\">\n              <Input\n                disabled={disabled}\n                placeholder=\"Ej: IsExternal\"\n                value={attribute}\n              />\n            </Form.Item>\n          </>\n        ) : type === \"attribute\" ? (\n          <Form.Item label=\"Nombre de la atributo\" name=\"attribute\">\n            <Input\n              disabled={disabled}\n              placeholder=\"Ej: GlobalId\"\n              value={attribute}\n            />\n          </Form.Item>\n        ) : type === \"location\" ? (\n          <>\n            <Form.Item label=\"Coordenada\" name=\"attribute\">\n              <Radio.Group value={attribute}>\n                <Radio.Button disabled={disabled} value=\"x\">\n                  {\"X\"}\n                </Radio.Button>\n                <Radio.Button disabled={disabled} value=\"y\">\n                  {\"Y\"}\n                </Radio.Button>\n                <Radio.Button disabled={disabled} value=\"z\">\n                  {\"Z\"}\n                </Radio.Button>\n              </Radio.Group>\n            </Form.Item>\n          </>\n        ) : null}\n        <Form.Item label=\"Operación\" name=\"operation\">\n          <Radio.Group value={operation}>\n            <Radio.Button disabled={disabled} value=\"eq\">\n              {\"=\"}\n            </Radio.Button>\n            <Radio.Button disabled={disabled} value=\"neq\">\n              {\"≠\"}\n            </Radio.Button>\n            <Radio.Button disabled={disabled} value=\"g\">\n              {\">\"}\n            </Radio.Button>\n            <Radio.Button disabled={disabled} value=\"l\">\n              {\"<\"}\n            </Radio.Button>\n            <Radio.Button disabled={disabled} value=\"geq\">\n              {\"≥\"}\n            </Radio.Button>\n            <Radio.Button disabled={disabled} value=\"leq\">\n              {\"≤\"}\n            </Radio.Button>\n            <Radio.Button disabled={disabled} value=\"e\">\n              {\"∃\"}\n            </Radio.Button>\n            <Radio.Button disabled={disabled} value=\"ne\">\n              {\"∄\"}\n            </Radio.Button>\n          </Radio.Group>\n        </Form.Item>\n        {operation !== \"e\" && operation !== \"ne\" && (\n          <Form.Item label=\"Valor esperado\" name=\"value\">\n            <Input disabled={disabled} placeholder=\"Ej: True\" value={value} />\n          </Form.Item>\n        )}\n      </Form>\n    </div>\n  );\n}\n\nfunction FilterForm({ data, showActions, onDelete, disabled }) {\n  const [form] = Form.useForm();\n  const [constraintsDeleteable, setConstraintsDeleteable] = useState(false);\n  const stateRef = useRef();\n\n  const [action, setAction] = useState(!!data ? data.action : \"include\");\n  const [scope, setScope] = useState(!!data ? data.scope : \"\");\n  const [space, setSpace] = useState(!!data ? data.space || \"\" : \"\");\n  const [entities, setEntities] = useState(!!data ? data.entities : []);\n  const [constraints, setConstraints] = useState(\n    !!data\n      ? data.constraints.map(\n          (prop) => (isDeleteable, onDelete, shifted, disabled) =>\n            (\n              <ConstraintForm\n                data={prop}\n                showActions={isDeleteable}\n                onDelete={onDelete}\n                shifted={shifted}\n                disabled={disabled}\n              />\n            )\n        )\n      : [\n          (isDeleteable, onDelete, shifted, disabled) => (\n            <ConstraintForm\n              showActions={isDeleteable}\n              onDelete={onDelete}\n              shifted={shifted}\n              disabled={disabled}\n            />\n          ),\n        ]\n  );\n\n  const defaultData = [\n    { name: \"action\", value: action },\n    { name: \"scope\", value: scope },\n    { name: \"space\", value: space },\n    { name: \"entities\", value: entities.join(\",\") },\n  ];\n\n  stateRef.current = constraints;\n\n  const togglePropsDeleteable = () => {\n    setConstraintsDeleteable(!constraintsDeleteable);\n  };\n\n  const onFormChange = ({ action, scope, space, entities }) => {\n    !!scope && setScope(scope);\n    !!action && setAction(action);\n    !!entities && setEntities(entities.split(\",\"));\n    !!space && setSpace(space);\n  };\n\n  const onClickAdd = () =>\n    setConstraints([\n      ...constraints,\n      (isDeleteable, onDelete, shifted, disabled) => (\n        <ConstraintForm\n          showActions={isDeleteable}\n          onDelete={onDelete}\n          shifted={shifted}\n          disabled={disabled}\n        />\n      ),\n    ]);\n\n  const deleteProp = (index) => {\n    delete constraints[index];\n    setConstraints([...constraints]);\n  };\n\n  return (\n    <>\n      <div className=\"RulesForm-FormDeleteable\">\n        {showActions && (\n          <div className=\"RulesForm-FormDeleteabe-Actions\">\n            <Button\n              danger\n              shape=\"circle\"\n              icon={<CloseOutlined />}\n              size=\"Large\"\n              onClick={onDelete}\n            />\n          </div>\n        )}\n\n        <Form form={form} onValuesChange={onFormChange} fields={defaultData}>\n          <Form.Item label=\"Buscar en\" name=\"scope\">\n            <Radio.Group value={scope}>\n              <Radio.Button disabled={disabled} value=\"global\">\n                Todo el modelo\n              </Radio.Button>\n              <Radio.Button disabled={disabled} value=\"space\">\n                IfcSpace\n              </Radio.Button>\n            </Radio.Group>\n          </Form.Item>\n\n          {scope === \"space\" && (\n            <Form.Item label=\"Nombre del espacio\" name=\"space\">\n              <Input\n                disabled={disabled}\n                placeholder=\"Ej: Dormitorio Principal\"\n                value={space}\n              />\n            </Form.Item>\n          )}\n\n          <Form.Item label=\"Entidades IFC\" name=\"entities\">\n            <Input\n              disabled={disabled}\n              placeholder=\"Ej: IfcBuildingElement, IfcFurnishingElement\"\n              value={entities.join()}\n            />\n          </Form.Item>\n        </Form>\n      </div>\n\n      {constraints.map(\n        (prop, idx) =>\n          !!prop && (\n            <Fragment key={idx}>\n              <Divider dashed />\n              {prop(\n                constraintsDeleteable &&\n                  constraints.filter((p) => !!p).length > 1,\n                () => deleteProp(idx),\n                showActions ||\n                  (constraintsDeleteable &&\n                    constraints.filter((p) => !!p).length === 1),\n                disabled\n              )}\n            </Fragment>\n          )\n      )}\n\n      <div style={{ marginTop: 24 }} className=\"RulesForm-ActionsContainer\">\n        <div />\n        <div className=\"RulesForm-HorizontalItems\">\n          {(constraints.filter((p) => !!p).length > 1 ||\n            constraintsDeleteable) && (\n            <Button\n              danger={!constraintsDeleteable}\n              type=\"dashed\"\n              onClick={togglePropsDeleteable}\n              disabled={disabled}\n            >\n              {constraintsDeleteable ? \"Listo\" : \"Quitar restricción\"}\n            </Button>\n          )}\n          <Button\n            type=\"dashed\"\n            disabled={constraintsDeleteable || disabled}\n            onClick={onClickAdd}\n            icon={<PlusOutlined />}\n          >\n            Agregar otra restricción\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default function RulesForm({ actions, data, onClick }) {\n  const [filters, setFilters] = useState(\n    !!data\n      ? data.filters.map((element, i) => (isDeleteable, onDelete, disabled) => (\n          <FilterForm\n            key={i}\n            showActions={isDeleteable}\n            onDelete={onDelete}\n            data={element}\n            disabled={disabled}\n          />\n        ))\n      : []\n  );\n  const [currentFilter, setCurrentFilter] = useState(-1);\n  const [rulesDeleteable, setRulesDeleteable] = useState(false);\n  const [disabled, setDisabled] = useState(!!data);\n  const [saveDisabled, setSaveDisabled] = useState(false);\n\n  const addFilter = () => {\n    setFilters([\n      ...filters,\n      (isDeleteable, onDelete, disabled) => (\n        <FilterForm\n          showActions={isDeleteable}\n          onDelete={onDelete}\n          disabled={disabled}\n        />\n      ),\n    ]);\n    setCurrentFilter(filters.length);\n  };\n\n  const toggleDeleteable = () => {\n    setRulesDeleteable(!rulesDeleteable);\n    setSaveDisabled(!saveDisabled);\n  };\n\n  const onDeleteFilter = (index) => {\n    delete filters[index];\n    const newConstraints = filters.filter((e) => !!e);\n    setCurrentFilter(newConstraints.length > 0 ? 0 : -1);\n    rulesDeleteable && setFilters(newConstraints);\n  };\n\n  const onSelectFilter = (value) => {\n    setCurrentFilter(value);\n  };\n\n  const toggleDisabled = () => setDisabled(!disabled);\n\n  return (\n    <>\n      <div className=\"RulesForm-ActionsContainer\">\n        <Button\n          shape=\"circle\"\n          icon={<ArrowLeftOutlined />}\n          size=\"Large\"\n          onClick={onClick}\n        />\n        {actions && (\n          <div className=\"RulesForm-HorizontalItems\">\n            <Button type=\"primary\" danger size=\"Large\">\n              Eliminar\n            </Button>\n          </div>\n        )}\n      </div>\n\n      <Divider />\n\n      <BasicInfo\n        data={!!data && { name: data.name, formula: data.formula }}\n        disabled={disabled}\n      />\n\n      <Divider />\n\n      <Select\n        placeholder=\"Selecciona un filtro\"\n        style={{ width: 200, marginBottom: currentFilter >= 0 && 24 }}\n        value={currentFilter >= 0 ? currentFilter : null}\n        onChange={onSelectFilter}\n      >\n        {filters.map((_, i) => (\n          <Option key={i} value={i}>{`p${i}`}</Option>\n        ))}\n      </Select>\n\n      {currentFilter >= 0 &&\n        filters[currentFilter](\n          rulesDeleteable,\n          () => onDeleteFilter(currentFilter),\n          disabled\n        )}\n\n      <Divider />\n\n      <div className=\"RulesForm-ActionsContainer\">\n        <div className=\"RulesForm-HorizontalItems\">\n          <Button\n            danger={!rulesDeleteable}\n            type={rulesDeleteable && \"primary\"}\n            onClick={toggleDeleteable}\n            disabled={disabled}\n          >\n            {rulesDeleteable ? \"Listo\" : \"Quitar Filtro\"}\n          </Button>\n          <Button\n            style={{ display: rulesDeleteable && \"none\" }}\n            onClick={addFilter}\n            disabled={disabled}\n          >\n            Nuevo Filtro\n          </Button>\n        </div>\n\n        <Button type=\"primary\" onClick={toggleDisabled} disabled={saveDisabled}>\n          {disabled ? \"Editar\" : \"Guardar\"}\n        </Button>\n      </div>\n    </>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\n\nimport { List, Button, Typography, Divider } from \"antd\";\n\nimport RulesForm from \"./RulesForm\";\n\nexport default function RulesList({ ...props }) {\n  const [data, setData] = useState([]);\n  const [ruleShown, setRuleShown] = useState(false);\n  const [currentRule, setCurrentRule] = useState(-1);\n\n  useEffect(() => {\n    fetch(`http://localhost:8000/rules/`, {\n      method: \"GET\",\n    })\n      .then((response) => response.json())\n      .then((success) => setData(success.rules))\n      .catch((error) => console.log(error));\n  }, []);\n\n  const hideRule = () => setRuleShown(false);\n\n  const setRule = (i) => {\n    setRuleShown(true);\n    setCurrentRule(i);\n  };\n\n  return ruleShown ? (\n    <RulesForm actions data={data[currentRule]} onClick={hideRule} />\n  ) : (\n    <List\n      itemLayout=\"horizontal\"\n      dataSource={data}\n      renderItem={(item, idx) => (\n        <>\n          <List.Item\n            actions={[\n              <Button onClick={() => setRule(idx)} type=\"text\">\n                Ver\n              </Button>,\n            ]}\n          >\n            <Typography.Text>{item.name}</Typography.Text>\n          </List.Item>\n        </>\n      )}\n    />\n  );\n}\n","import React, { useState, useEffect } from \"react\";\n\nimport { Layout, Row, Col } from \"antd\";\n\nimport HeaderMenu from \"../../common/HeaderMenu\";\nimport RulesList from \"./RulesList\";\nimport RulesForm from \"./RulesForm\";\n\nconst { Header, Content, Footer } = Layout;\n\nexport default function RulesManager({ ...props }) {\n  const [formShown, setFormShown] = useState(false);\n  const [content, setContent] = useState(null);\n\n  useEffect(() => {\n    setContent(formShown ? <RulesForm onClick={hideForm} /> : <RulesList />);\n  }, [formShown, setContent]);\n\n  const showForm = () => setFormShown(true);\n  const hideForm = () => setFormShown(false);\n\n  return (\n    <Layout>\n      <Header style={{ position: \"fixed\", width: \"100%\", zIndex: 2 }}>\n        <HeaderMenu onClick={showForm} />\n      </Header>\n      <Content\n        style={{ minHeight: \"100vh\", paddingTop: 64 + 24, background: \"#fff\" }}\n      >\n        <Row justify=\"center\">\n          <Col xl={20} xxl={16} xs={22}>\n            {content}\n          </Col>\n        </Row>\n      </Content>\n    </Layout>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\n\nimport { Upload, Button, Timeline } from \"antd\";\nimport {\n  UploadOutlined,\n  CheckOutlined,\n  CloseOutlined,\n  PlusSquareFilled,\n  MinusSquareFilled,\n} from \"@ant-design/icons\";\n\nimport \"./index.scss\";\n\nconst colorSwitch = (s) => {\n  if (\"boolean\" === typeof s && s) {\n    return \"green\";\n  }\n  if (\"boolean\" === typeof s && !s) {\n    return \"red\";\n  }\n  return \"blue\";\n};\n\nconst dotSwitch = (s, onClick, expanded) => {\n  if (\"boolean\" === typeof s && s) {\n    return <CheckOutlined style={{ fontSize: 16 }} />;\n  }\n  if (\"boolean\" === typeof s && !s) {\n    return <CloseOutlined style={{ fontSize: 16 }} />;\n  }\n\n  if (expanded) {\n    return <MinusSquareFilled onClick={onClick} style={{ fontSize: 18 }} />;\n  }\n  return <PlusSquareFilled onClick={onClick} style={{ fontSize: 18 }} />;\n};\n\nfunction Result(name, content) {\n  const result = name;\n\n  return result;\n}\n\nexport default function FileUploader({ ...props }) {\n  const [uuid, setUuid] = useState(null);\n  const [validateShown, setValidateShown] = useState(false);\n  const [results, setResults] = useState(null);\n  const [validating, setValidating] = useState(false);\n  const [expanded, setExpanded] = useState([]);\n\n  const onChange = (info) => {\n    if (info.file.status === \"done\") {\n      setUuid(info.file.response.uuid);\n      setValidateShown(true);\n    } else if (info.file.status === \"error\") {\n    }\n  };\n\n  const onDelete = () => {\n    setValidateShown(false);\n    setUuid(null);\n  };\n\n  const onClick = () => {\n    setResults(null);\n    setValidating(true);\n    fetch(`http://localhost:8000/parse/${uuid}`, {\n      method: \"POST\",\n    })\n      .then((response) => {\n        setValidating(false);\n        return response.json();\n      })\n      .then((success) => {\n        setResults(success.data);\n        setExpanded(success.data.map((e) => false));\n      })\n      .catch((error) => console.log(error));\n  };\n\n  const toggleExpand = (i) => {\n    expanded[i] = !expanded[i];\n    setExpanded([...expanded]);\n  };\n\n  return (\n    <>\n      <Upload\n        name=\"file\"\n        accept=\".ifc\"\n        maxCount={1}\n        action=\"http://localhost:8000/upload\"\n        onChange={onChange}\n        onRemove={onDelete}\n      >\n        <Button icon={<UploadOutlined />}>Subir archivo</Button>\n      </Upload>\n\n      {validateShown && (\n        <Button\n          style={{ marginTop: 24, marginBottom: 24 }}\n          type=\"primary\"\n          onClick={onClick}\n          loading={validating}\n          disabled={validating}\n        >\n          {validating ? \"Validando\" : \"Validar\"}\n        </Button>\n      )}\n\n      {results && (\n        <Timeline>\n          {Object.keys(results).map((k, i) => (\n            <Timeline.Item\n              key={i}\n              className=\"FileUploader-Fade\"\n              style={{ animationDelay: `${200 * i}ms` }}\n              dot={dotSwitch(results[k], () => toggleExpand(i), expanded[i])}\n              color={colorSwitch(results[k])}\n            >\n              {expanded ? Result(k, results[k]) : Result(k)}\n            </Timeline.Item>\n          ))}\n        </Timeline>\n      )}\n    </>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\n\nimport { Layout, Row, Col } from \"antd\";\n\nimport HeaderMenu from \"../../common/HeaderMenu\";\nimport FileUploader from \"./FileUploader\";\n\nconst { Header, Content, Footer } = Layout;\n\nexport default function ModelValidator({ ...props }) {\n  return (\n    <Layout>\n      <Header style={{ position: \"fixed\", width: \"100%\", zIndex: 2 }}>\n        <HeaderMenu />\n      </Header>\n      <Content\n        style={{ minHeight: \"100vh\", paddingTop: 64 + 24, background: \"#fff\" }}\n      >\n        <Row justify=\"center\">\n          <Col xl={20} xxl={16} xs={22}>\n            <FileUploader />\n          </Col>\n        </Row>\n      </Content>\n    </Layout>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport RulesManager from \"./manager/rules-management\";\nimport ModelValidator from \"./manager/model-validator\";\nimport \"./index.scss\";\n\nReactDOM.render(\n  <Router>\n    <Switch>\n      <Route path=\"/upload\">\n        <ModelValidator />\n      </Route>\n      <Route path=\"/\">\n        <RulesManager />\n      </Route>\n    </Switch>\n  </Router>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}